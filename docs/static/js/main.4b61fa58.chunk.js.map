{"version":3,"sources":["components/common/DateInput.js","tools/api.js","DTO/coach.js","actions/coach.js","DTO/establishment.js","actions/establishment.js","DTO/activity.js","actions/activity.js","actions/offer.js","DTO/offer.js","DTO/member.js","actions/member.js","components/common/Avatar.js","components/modals/OfferDetailsModal.js","components/OffersBrowse/OfferCard.js","components/OffersBrowse/OffersBrowse.js","tools/hooks.js","App.js","index.js"],"names":["DateInput","value","Date","onChange","options","useMemo","mode","dateFormat","className","axios","defaults","headers","common","get","url","params","then","resp","data","catch","err","api","offer","search","company","date_start","date","min_date","max_date","page","page_size","metaActivity","ids","id__in","length","join","undefined","id","coach","establishment","establishmentLocation","booking","offer_id","member","coachDTOInput","name","user","first_name","last_name","photo","fetchCoachs","a","filters","response","results","map","r","establishmentDTOInput","title","address","location","specific_info","fetchEstablishments","activityDTOInput","activity","cover_main","description","color","rating","fetchActivities","fetchOffers","booking_ids","bookings","level","slots","tot_slots","effectif","duration","duration_minute","validated_booking_count","establishment_id","coach_id","activity_id","meta_activity","fetchOffersFull","offers","Promise","all","i","activities","establishments","coachs","find","memberDTOInput","fetchMembers","Img","styled","img","Avatar","props","OfferDetailsModal","close","useState","open","setOpen","members","setMembers","useEffect","closing","useCallback","handleClose","Modal","onClosed","isOpen","unmountOnClose","toggle","ModalHeader","ModalBody","FormGroup","src","alt","m","ModalFooter","Button","onClick","OverflowEllipsisText","div","OfferCard","moment","format","add","details","toggleShowDetails","toggleDetails","Card","style","borderBottomColor","borderBottomWidth","height","backgroundImage","backgroundSize","CardBody","size","defaultState","total","fetching","OffersBrowse","dates","setDates","defaultValue","setValue","newValue","prevValue","useISOState","setState","handleDateChange","loadMore","result","count","Container","fluid","overflowY","pageStart","element","initialLoad","hasMore","loader","threshold","useWindow","Col","sm","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4b61fa58.chunk.js","sourcesContent":["import React, {useMemo} from \"react\";\nimport \"flatpickr/dist/themes/light.css\";\nimport Flatpickr from \"react-flatpickr\";\n\nexport const DateInput = ({value = new Date(), onChange}) => {\n  const options = useMemo(() => ({\n    mode: \"range\",\n    dateFormat: \"d-m-Y\"\n  }), []);\n\n  return (\n    <Flatpickr\n      className=\"form-control\"\n      onChange={onChange}\n      options={options}\n      value={value}/>\n  )\n}\n\nexport default DateInput;\n","import axios from \"axios\";\n\nconst DEFAULT_COMPANY_ID = 6;\n\nconst token = \"8c5ba20bc481c4d2803325833a5cf54771f6ba45\";\naxios.defaults.headers.common = {'Authorization': `Token ${token}`};\n\nconst get = (url, params) => {\n  return axios.get(url, {\n    params : params\n  }).then(resp => {\n    return resp.data;\n  }).catch(err => {\n    throw err;\n  });\n};\n\nexport const api = {\n  offer: {\n    search: ({company = DEFAULT_COMPANY_ID, date_start, date, min_date, max_date, page, page_size} = {}) => {\n      return get('https://api.staging.bsport.io/api/v1/offer/', {\n          company,\n          date,\n          min_date,\n          max_date,\n          date_start,\n          page,\n          page_size\n        }\n      )\n    }\n  },\n  metaActivity: {\n    search: ({company = DEFAULT_COMPANY_ID, ids, page_size, page} = {}) => {\n      return get('https://api.staging.bsport.io/api/v1/meta-activity/', {\n        company,\n        id__in: ids?.length ? ids.join(',') : undefined,\n        page_size,\n        page\n      })\n    },\n    get: ({id}) => {\n      return get(`https://api.staging.bsport.io/api/v1/meta-activity/${id}`);\n    }\n  },\n  coach: {\n    search: ({company = DEFAULT_COMPANY_ID, ids, page_size, page} = {}) => {\n      return get('https://api.staging.bsport.io/api/v1/coach/', {\n        company,\n        id__in: !!ids?.length ? ids.join(',') : undefined,\n        page_size,\n        page\n      })\n    },\n    get: ({id}) => {\n      return get(`https://api.staging.bsport.io/api/v1/coach/${id}`);\n    }\n  },\n  establishment: {\n    search: ({company = DEFAULT_COMPANY_ID, ids, page_size, page} = {}) => {\n      return get('https://api.staging.bsport.io/api/v1/establishment/', {\n        company,\n        id__in: !!ids?.length ? ids.join(',') : undefined,\n        page_size,\n        page\n      })\n    },\n    get: ({id}) => {\n      return get(`https://api.staging.bsport.io/api/v1/establishment/${id}`)\n    }\n  },\n  establishmentLocation: {\n    search: ({company = DEFAULT_COMPANY_ID} = {}) => {\n      return get('https://api.staging.bsport.io/api/v1/establishment/marker/', {\n        company\n      })\n    }\n  },\n  booking: {\n    search: ({offer_id, page, page_size} = {}) => {\n      return get('https://api.staging.bsport.io/api/v1/booking/', {\n        offer: offer_id,\n        page,\n        page_size\n      })\n    }\n  },\n  member: {\n    search: ({company = DEFAULT_COMPANY_ID, offer_id, ids, page, page_size} = {}) => {\n      return get('https://api.staging.bsport.io/api/v1/member/', {\n        company,\n        offer: offer_id,\n        page,\n        page_size,\n        id__in: !!ids?.length ? ids.join(',') : undefined\n      })\n    }\n  }\n}\n\nexport default api;\n","export function coachDTOInput(coach){\n  return {\n    id: coach.id,\n    name: coach.user?.name,\n    first_name: coach.user?.first_name,\n    last_name: coach.user?.last_name,\n    photo: coach.user?.photo\n  }\n}\n","import api from \"../tools/api\";\nimport {coachDTOInput} from \"../DTO/coach\";\n\nexport const fetchCoachs = async (filters = {}) => {\n  const response = await api.coach.search(filters);\n\n  return {\n    ...response,\n    results: response.results.map(r => coachDTOInput(r))\n  }\n}\n\nexport const fetchCoach = async ({id}) => {\n  const coach = await api.coach.get({id});\n\n  return coachDTOInput(coach);\n}\n","export function establishmentDTOInput(establishment){\n  return {\n    id: establishment.id,\n    title: establishment.title,\n    address: establishment.location?.address,\n    specific_info: establishment.specific_info\n  }\n}\n","import api from \"../tools/api\";\nimport {establishmentDTOInput} from \"../DTO/establishment\";\n\nexport const fetchEstablishments = async (filters = {}) => {\n  const response = await api.establishment.search(filters);\n\n  return {\n    ...response,\n    results: response.results.map(r => establishmentDTOInput(r))\n  }\n}\n\nexport const fetchEstablishment = async ({id}) => {\n  const establishment = await api.establishment.get({id});\n\n  return establishmentDTOInput(establishment);\n};\n","export function activityDTOInput(activity){\n  return {\n    id: activity.id,\n    name: activity.name,\n    cover_main: activity.cover_main,\n    description: activity.description,\n    color: activity.color,\n    rating: activity.rating\n  }\n}\n","import api from \"../tools/api\";\nimport {activityDTOInput} from \"../DTO/activity\";\n\nexport const fetchActivities = async (filters = {}) => {\n  const response = await api.metaActivity.search(filters);\n\n  return {\n    ...response,\n    results: response.results.map(r => activityDTOInput(r))\n  }\n}\n\nexport const fetchActivity = async ({id}) => {\n  const activity = await api.metaActivity.get({id});\n\n  return activityDTOInput(activity);\n}\n","import api from \"../tools/api\";\nimport {offerDTOInput} from \"../DTO/offer\";\nimport {fetchCoachs} from \"./coach\";\nimport {fetchEstablishments} from \"./establishment\";\nimport {fetchActivities} from \"./activity\";\n\nexport const fetchOffers = async (filters) => {\n  const response = await api.offer.search({...filters});\n\n  return {\n    ...response,\n    results: response.results.map(r => offerDTOInput(r))\n  }\n}\n\nexport const fetchOffersFull = async (filters) => {\n  let offers = await fetchOffers(filters);\n\n  const [activities, establishments, coachs] = await Promise.all([\n    fetchActivities({\n      ids: offers.results.map(i => i.activity_id),\n      page_size: offers.results.length\n    }),\n    fetchEstablishments({\n      ids: offers.results.map(i => i.establishment_id),\n      page_size: offers.results.length\n    }),\n    fetchCoachs({\n      ids: offers.results.map(i => i.coach_id),\n      page_size: offers.results.length\n    })\n  ])\n\n  offers.results = offers.results.map(offer => {\n    return {\n      ...offer,\n      activity: activities.results.find(i => i.id === offer.activity_id),\n      coach: coachs.results.find(i => i.id === offer.coach_id),\n      establishment: establishments.results.find(i => i.id === offer.establishment_id)\n    }\n  });\n\n  return offers;\n}\n","export function offerDTOInput(offer){\n  return {\n    id: offer.id,\n    booking_ids: offer.bookings,\n    level: offer.level,\n    slots: offer.tot_slots,\n    effectif: offer.effectif,\n    duration: offer.duration_minute,\n    validated_booking_count: offer.validated_booking_count,\n    date_start: offer.date_start,\n    establishment_id: offer.establishment,\n    coach_id: offer.coach,\n    activity_id: offer.meta_activity\n  }\n}\n","export function memberDTOInput(member){\n  return {\n    ...member\n  }\n}\n","import api from \"../tools/api\";\nimport {memberDTOInput} from \"../DTO/member\";\n\nexport const fetchMembers = async (filters = {}) => {\n  const response = await api.member.search(filters);\n\n  return {\n    ...response,\n    results: response.results.map(r => memberDTOInput(r))\n  }\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Img = styled.img`\n  width: 40px;\n  height: 40px;\n`\n\nexport const Avatar = ({className, ...props}) => {\n  return <Img className={`rounded-circle ${className || ''}`} {...props}/>\n}\n","import React, {useCallback, useEffect, useState} from \"react\";\nimport {Button, FormGroup, Modal, ModalBody, ModalHeader, ModalFooter} from \"reactstrap\";\nimport {fetchMembers} from \"../../actions/member\";\nimport {Avatar} from \"../common/Avatar\";\n\nexport const OfferDetailsModal = ({offer, close}) => {\n  const [open, setOpen] = useState(true);\n  const [members, setMembers] = useState([]);\n\n  useEffect(() => {\n    (async () => {\n      let members = await fetchMembers({offer_id: offer.id, page_size: offer.effectif});\n\n      setMembers(members.results);\n    })()\n  }, []);\n\n  //to wait modal closing animation finished\n  const closing = useCallback(() => {\n    setOpen(false);\n  }, []);\n\n  const handleClose = useCallback(() => {\n    close();\n  }, []);\n\n  return (\n    <Modal\n      onClosed={handleClose}\n      isOpen={open}\n      unmountOnClose={true}\n      toggle={closing}>\n      <ModalHeader>\n        {offer.activity?.name}\n      </ModalHeader>\n      <ModalBody>\n        <FormGroup className=\"mb-3\">\n          {offer.activity?.description}\n        </FormGroup>\n        <FormGroup className=\"mb-3\">\n          <h6>Teacher</h6>\n          <div className=\"d-flex align-items-center\">\n            <Avatar src={offer.coach?.photo} className=\"me-2\" alt={\"Coach photo\"}/>\n            <span>{offer.coach?.name}</span>\n          </div>\n        </FormGroup>\n        <FormGroup className=\"mb-3\">\n          <h6>{offer.establishment?.title}</h6>\n          <div>\n            {offer.establishment?.specific_info}\n          </div>\n        </FormGroup>\n        <FormGroup className=\"mb-3\">\n          <h6>Address</h6>\n          <div>\n            {offer.establishment?.address}\n          </div>\n        </FormGroup>\n        <FormGroup>\n          <h6>Registered members</h6>\n          <div>\n            {!members.length &&\n            'There is no registered members...'}\n            {!!members.length &&\n            members.map(m => {\n              return (\n                <div key={m.id}>\n                  {m.name}\n                </div>\n              )\n            })}\n          </div>\n        </FormGroup>\n      </ModalBody>\n      <ModalFooter>\n        <Button onClick={closing}>Got it</Button>\n      </ModalFooter>\n    </Modal>\n  )\n}\n\nexport default OfferDetailsModal;\n","import React, {useCallback, useMemo, useState} from \"react\";\nimport {Card, CardBody, Button} from \"reactstrap\";\nimport moment from \"moment\";\nimport styled from \"styled-components\";\nimport {OfferDetailsModal} from \"../modals/OfferDetailsModal\";\nimport {Avatar} from \"../common/Avatar\";\n\nconst OverflowEllipsisText = styled.div`\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nexport const OfferCard = ({offer}) => {\n  const date = useMemo(() => `${moment(offer.date_start).format('DD/MM/YYYY HH:mm')} - ${moment(offer.date_start).add(offer.duration, 'm').format('HH:mm')}`, [offer])\n  const [details, toggleShowDetails] = useState(false);\n\n  const toggleDetails = useCallback(() => {\n    toggleShowDetails(details => !details);\n  }, []);\n\n  return (\n    <Card className=\"mb-2 position-relative\" style={{borderBottomColor: offer.activity?.color, borderBottomWidth: 2}}>\n      <Avatar className=\"position-absolute top-0 start-0 mt-1 ms-1\" src={offer.coach?.photo} alt={\"Coach photo\"}/>\n      <div\n        className=\"card-img-top\"\n        style={{\n          height: 200,\n          backgroundImage: `url(${offer?.activity?.cover_main})`,\n          backgroundSize: \"cover\"\n        }}/>\n      <CardBody>\n        <h5>\n          <OverflowEllipsisText title={offer.activity?.name}>\n            {offer.activity?.name}\n          </OverflowEllipsisText>\n        </h5>\n        <OverflowEllipsisText>\n          <i className=\"far fa-calendar\"></i>  <span title={date}>{date}</span>\n        </OverflowEllipsisText>\n        <OverflowEllipsisText>\n          <i className=\"fas fa-location-arrow\"></i> <span title={offer.establishment?.title}>{offer.establishment?.title}</span>\n        </OverflowEllipsisText>\n        <OverflowEllipsisText>\n          <i className=\"fas fa-map-marker-alt\"></i> <span title={offer.establishment?.address}>{offer.establishment?.address}</span>\n        </OverflowEllipsisText>\n        <OverflowEllipsisText>\n          <i className=\"fas fa-user-tie\"></i> <span title={offer.coach?.name}>{offer.coach?.name}</span>\n        </OverflowEllipsisText>\n        <OverflowEllipsisText>\n          Level: <span title={offer.value}>{offer.level}</span>\n        </OverflowEllipsisText>\n        <OverflowEllipsisText>\n          Reserved slots: {offer.validated_booking_count}/{offer.effectif}\n        </OverflowEllipsisText>\n        {details &&\n        <OfferDetailsModal offer={offer} close={toggleDetails}/>}\n        <Button size=\"sm\" className=\"mt-2\" onClick={toggleDetails}>Show details</Button>\n      </CardBody>\n    </Card>\n  )\n}\n\nexport default OfferCard;\n","import React, {useCallback, useState} from \"react\";\nimport {DateInput} from \"../common/DateInput\";\nimport {Col, Container} from \"reactstrap\";\nimport {useISOState} from \"../../tools/hooks\";\nimport {fetchOffersFull} from \"../../actions/offer\";\nimport moment from \"moment\";\nimport InfiniteScroll from \"react-infinite-scroller\";\nimport OfferCard from \"./OfferCard\";\n\nconst defaultState = {\n  offers: [],\n  total: 0,\n  size: 10,\n  page: 0,\n  fetching: false\n};\n\nexport const OffersBrowse = () => {\n  const [dates, setDates] = useState([new Date(), new Date()]);\n  const [{\n    offers,\n    total,\n    size,\n    page,\n    fetching\n  }, setState] = useISOState(defaultState);\n\n  const handleDateChange = useCallback((value) => {\n    if (value.length === 2){\n      setDates(value);\n      setState({\n        page: 0,\n        offers: [],\n        total: 0\n      })\n    }\n  }, []);\n\n  const loadMore = useCallback(async () => {\n    setState({fetching: true});\n\n    let result = await fetchOffersFull({\n      min_date: moment(dates[0]).format('YYYY-MM-DD'),\n      max_date: moment(dates[1]).format('YYYY-MM-DD'),\n      page: page + 1,\n      page_size: size\n    });\n\n    setState({\n      total: result.count,\n      page: page + 1,\n      offers: [...offers, ...result.results],\n      fetching: false\n    });\n  },[offers, total]);\n\n  return (\n    <Container className=\"d-flex flex-column overflow-auto\">\n      <h3>Search for activities</h3>\n      <div className=\"mb-3\">\n        <DateInput\n          value={dates}\n          onChange={handleDateChange}/>\n      </div>\n      <Container fluid style={{overflowY: 'auto'}}>\n        <InfiniteScroll\n          pageStart={0}\n          element={'div'}\n          initialLoad={true}\n          className={'row'}\n          hasMore={!fetching && (total > offers.length || page === 0)}\n          loadMore={loadMore}\n          loader={null}\n          threshold={30}\n          useWindow={false}>\n          {offers.map(offer => {\n            return (\n              <Col key={offer.id} sm={4}>\n                <OfferCard offer={offer}/>\n              </Col>\n            )\n          })}\n          {fetching && <div>Chargement...</div>}\n        </InfiniteScroll>\n      </Container>\n    </Container>\n  )\n}\n\nexport default OffersBrowse;\n","import {useCallback, useState} from \"react\";\n\nexport function useISOState(defaultValue){\n  const [value, setValue] = useState(defaultValue);\n\n  const setState = useCallback((newValue) => {\n    setValue(prevValue => ({\n      ...prevValue,\n      ...newValue\n    }))\n  }, [setValue]);\n\n  return [value, setState];\n}\n","import React from \"react\";\nimport {OffersBrowse} from \"./components/OffersBrowse/OffersBrowse\";\n\nfunction App() {\n  return (\n    <div className=\"d-flex flex-column pt-2 pb-2 vh-100\">\n      <OffersBrowse/>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}