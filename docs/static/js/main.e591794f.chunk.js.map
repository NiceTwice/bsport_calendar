{"version":3,"sources":["components/DateInput.js","tools/api.js","DTO/coach.js","actions/coach.js","DTO/establishment.js","actions/establishment.js","DTO/activity.js","actions/activity.js","DTO/booking.js","actions/booking.js","actions/offer.js","DTO/offer.js","components/OfferCard.js","components/OffersBrowse.js","tools/hooks.js","App.js","index.js"],"names":["DateInput","value","Date","onChange","options","useMemo","mode","dateFormat","className","axios","defaults","headers","common","get","url","params","then","resp","data","catch","err","api","offer","search","company","date_start","date","min_date","max_date","page","page_size","metaActivity","id","coach","establishment","establishmentLocation","booking","offer_id","coachDTOInput","name","user","first_name","last_name","photo","fetchCoach","a","establishmentDTOInput","title","address","location","specific_info","fetchEstablishment","activityDTOInput","activity","cover_main","description","color","rating","fetchActivity","bookingDTOInput","member","fetchBookings","filters","response","results","map","r","fetchOffers","booking_ids","bookings","level","slots","tot_slots","effectif","duration","duration_minute","validated_booking_count","establishment_id","coach_id","activity_id","meta_activity","fetchOffersFull","offers","Promise","all","allSettled","length","status","OverflowEllipsisText","styled","div","OfferCard","moment","format","add","Card","style","borderBottomColor","borderBottomWidth","height","backgroundImage","backgroundSize","CardBody","defaultState","total","size","fetching","OffersBrowse","useState","dates","setDates","defaultValue","setValue","useCallback","newValue","prevValue","useISOState","setState","handleDateChange","loadMore","result","count","Container","fluid","overflowY","pageStart","element","initialLoad","hasMore","loader","threshold","useWindow","Col","sm","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e591794f.chunk.js","sourcesContent":["import React, {useMemo} from \"react\";\nimport \"flatpickr/dist/themes/light.css\";\nimport Flatpickr from \"react-flatpickr\";\n\nexport const DateInput = ({value = new Date(), onChange}) => {\n  const options = useMemo(() => ({\n    mode: \"range\",\n    dateFormat: \"d-m-Y\"\n  }), []);\n\n  return (\n    <Flatpickr\n      className=\"form-control\"\n      onChange={onChange}\n      options={options}\n      value={value}/>\n  )\n}\n\nexport default DateInput;\n","import axios from \"axios\";\n\nconst DEFAULT_COMPANY_ID = 6;\n\nconst token = \"8c5ba20bc481c4d2803325833a5cf54771f6ba45\";\naxios.defaults.headers.common = {'Authorization': `Bearer ${token}`};\n\nconst get = (url, params) => {\n  return axios.get(url, {\n    params : params\n  }).then(resp => {\n    return resp.data;\n  }).catch(err => {\n    throw err;\n  });\n};\n\nexport const api = {\n  offer: {\n    search: ({company = DEFAULT_COMPANY_ID, date_start, date, min_date, max_date, page, page_size} = {}) => {\n      return get('https://api.staging.bsport.io/api/v1/offer/', {\n          company,\n          date,\n          min_date,\n          max_date,\n          date_start,\n          page,\n          page_size\n        }\n      )\n    }\n  },\n  metaActivity: {\n    search: ({company = DEFAULT_COMPANY_ID} = {}) => {\n      return get('https://api.staging.bsport.io/api/v1/meta-activity/', {\n        company\n      })\n    },\n    get: ({id}) => {\n      return get(`https://api.staging.bsport.io/api/v1/meta-activity/${id}`);\n    }\n  },\n  coach: {\n    search: ({company = DEFAULT_COMPANY_ID} = {}) => {\n      return get('https://api.staging.bsport.io/api/v1/coach/', {\n        company\n      })\n    },\n    get: ({id}) => {\n      return get(`https://api.staging.bsport.io/api/v1/coach/${id}`);\n    }\n  },\n  establishment: {\n    search: ({company = DEFAULT_COMPANY_ID} = {}) => {\n      return get('https://api.staging.bsport.io/api/v1/establishment/', {\n        company\n      })\n    },\n    get: ({id}) => {\n      return get(`https://api.staging.bsport.io/api/v1/establishment/${id}`)\n    }\n  },\n  establishmentLocation: {\n    search: ({company = DEFAULT_COMPANY_ID} = {}) => {\n      return get('https://api.staging.bsport.io/api/v1/establishment/marker/', {\n        company\n      })\n    }\n  },\n  booking: {\n    search: ({offer_id, page, page_size} = {}) => {\n      return get('https://api.staging.bsport.io/api/v1/booking/', {\n        offer: offer_id,\n        page,\n        page_size\n      })\n    }\n  }\n}\n\nexport default api;\n","export function coachDTOInput(coach){\n  return {\n    id: coach.id,\n    name: coach.user?.name,\n    first_name: coach.user?.first_name,\n    last_name: coach.user?.last_name,\n    photo: coach.user?.photo\n  }\n}\n","import api from \"../tools/api\";\nimport {coachDTOInput} from \"../DTO/coach\";\n\nexport const fetchCoachs = async (filters = {}) => {\n  const response = await api.coach.search(filters);\n\n  return {\n    ...response,\n    results: response.results.map(r => coachDTOInput(r))\n  }\n}\n\nexport const fetchCoach = async ({id}) => {\n  const coach = await api.coach.get({id});\n\n  return coachDTOInput(coach);\n}\n","export function establishmentDTOInput(establishment){\n  return {\n    id: establishment.id,\n    title: establishment.title,\n    address: establishment.location?.address,\n    specific_info: establishment.specific_info\n  }\n}\n","import api from \"../tools/api\";\nimport {establishmentDTOInput} from \"../DTO/establishment\";\n\nexport const fetchEstablishments = async (filters = {}) => {\n  const response = await api.establishment.search(filters);\n\n  return {\n    ...response,\n    results: response.results.map(r => establishmentDTOInput(r))\n  }\n}\n\nexport const fetchEstablishment = async ({id}) => {\n  const establishment = await api.establishment.get({id});\n\n  return establishmentDTOInput(establishment);\n};\n","export function activityDTOInput(activity){\n  return {\n    id: activity.id,\n    name: activity.name,\n    cover_main: activity.cover_main,\n    description: activity.description,\n    color: activity.color,\n    rating: activity.rating\n  }\n}\n","import api from \"../tools/api\";\nimport {activityDTOInput} from \"../DTO/activity\";\n\nexport const fetchActivities = async (filters = {}) => {\n  const response = await api.metaActivity.search(filters);\n\n  return {\n    ...response,\n    results: response.results.map(r => activityDTOInput(r))\n  }\n}\n\nexport const fetchActivity = async ({id}) => {\n  const activity = await api.metaActivity.get({id});\n\n  return activityDTOInput(activity);\n}\n","export function bookingDTOInput(booking){\n  return {\n    id: booking.id,\n    member: booking.member\n  }\n}\n","import api from \"../tools/api\";\nimport {bookingDTOInput} from \"../DTO/booking\";\n\nexport const fetchBookings = async (filters = {}) => {\n  const response = await api.booking.search(filters);\n\n  return {\n    ...response,\n    results: response.results.map(r => bookingDTOInput(r))\n  }\n}\n","import api from \"../tools/api\";\nimport {offerDTOInput} from \"../DTO/offer\";\nimport {fetchCoach} from \"./coach\";\nimport {fetchEstablishment} from \"./establishment\";\nimport {fetchActivity} from \"./activity\";\nimport {fetchBookings} from \"./booking\";\n\nexport const fetchOffers = async (filters) => {\n  const response = await api.offer.search({...filters});\n\n  return {\n    ...response,\n    results: response.results.map(r => offerDTOInput(r))\n  }\n}\n\nexport const fetchOffersFull = async (filters) => {\n  let offers = await fetchOffers(filters);\n\n  offers.results = await Promise.all(offers.results.map(async (r) => {\n    const [activity, coach, establishment, bookings] = await Promise.allSettled([\n      fetchActivity({id: r.activity_id}),\n      fetchCoach({id: r.coach_id}),\n      fetchEstablishment({id: r.establishment_id}),\n      fetchBookings({\n        offer_id: r.id,\n        page_size: r.effectif.length\n      })\n    ])\n\n    r.activity = activity.status === 'fulfilled' ? activity.value : null;\n    r.coach = coach.status === 'fulfilled' ? coach.value : null;\n    r.establishment = establishment.status === 'fulfilled' ? establishment.value : null;\n    r.bookings = bookings.status === 'fulfilled' ? bookings.value.results : [];\n\n    return r;\n  }));\n\n  return offers;\n}\n","export function offerDTOInput(offer){\n  return {\n    id: offer.id,\n    booking_ids: offer.bookings,\n    level: offer.level,\n    slots: offer.tot_slots,\n    effectif: offer.effectif,\n    duration: offer.duration_minute,\n    validated_booking_count: offer.validated_booking_count,\n    date_start: offer.date_start,\n    establishment_id: offer.establishment,\n    coach_id: offer.coach,\n    activity_id: offer.meta_activity\n  }\n}\n","import React, {useMemo} from \"react\";\nimport {Card, CardBody} from \"reactstrap\";\nimport moment from \"moment\";\nimport styled from \"styled-components\";\n\nconst OverflowEllipsisText = styled.div`\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n\nexport const OfferCard = ({offer}) => {\n  const date = useMemo(() => `${moment(offer.date_start).format('DD/MM/YYYY HH:mm')} - ${moment(offer.date_start).add(offer.duration, 'm').format('HH:mm')}`, [offer])\n\n  return (\n    <Card className=\"mb-2\" style={{borderBottomColor: offer.activity?.color, borderBottomWidth: 2}}>\n      <div\n        className=\"card-img-top\"\n        style={{\n          height: 200,\n          backgroundImage: `url(${offer?.activity?.cover_main})`,\n          backgroundSize: \"cover\"\n        }}/>\n      <CardBody>\n        <h5>\n          <OverflowEllipsisText title={offer.activity?.name}>\n            {offer.activity?.name}\n          </OverflowEllipsisText>\n        </h5>\n        <OverflowEllipsisText>\n          <i className=\"far fa-calendar\"></i>  <span title={date}>{date}</span>\n        </OverflowEllipsisText>\n        <OverflowEllipsisText>\n          <i className=\"fas fa-map-marker-alt\"></i> <span title={offer.establishment?.address}>{offer.establishment?.address}</span>\n        </OverflowEllipsisText>\n        <OverflowEllipsisText>\n          <i className=\"fas fa-user-tie\"></i> <span title={offer.coach?.name}>{offer.coach?.name}</span>\n        </OverflowEllipsisText>\n        <OverflowEllipsisText>\n          Level: <span title={offer.value}>{offer.level}</span>\n        </OverflowEllipsisText>\n        <OverflowEllipsisText>\n          Slots: {offer.validated_booking_count}/{offer.effectif}\n        </OverflowEllipsisText>\n      </CardBody>\n    </Card>\n  )\n}\n\nexport default OfferCard;\n","import React, {useCallback, useState} from \"react\";\nimport {DateInput} from \"./DateInput\";\nimport {Col, Container} from \"reactstrap\";\nimport {useISOState} from \"../tools/hooks\";\nimport {fetchOffersFull} from \"../actions/offer\";\nimport moment from \"moment\";\nimport InfiniteScroll from \"react-infinite-scroller\";\nimport OfferCard from \"./OfferCard\";\n\nconst defaultState = {\n  offers: [],\n  total: 0,\n  size: 10,\n  page: 0,\n  fetching: false\n};\n\nexport const OffersBrowse = () => {\n  const [dates, setDates] = useState([new Date(), new Date()]);\n  const [{\n    offers,\n    total,\n    size,\n    page,\n    fetching\n  }, setState] = useISOState(defaultState);\n\n  const handleDateChange = useCallback((value) => {\n    if (value.length === 2){\n      setDates(value);\n      setState({\n        page: 0,\n        offers: [],\n        total: 0\n      })\n    }\n  }, []);\n\n  const loadMore = useCallback(async () => {\n    setState({fetching: true});\n\n    let result = await fetchOffersFull({\n      min_date: moment(dates[0]).format('YYYY-MM-DD'),\n      max_date: moment(dates[1]).format('YYYY-MM-DD'),\n      page: page + 1,\n      page_size: size\n    });\n\n    setState({\n      total: result.count,\n      page: page + 1,\n      offers: [...offers, ...result.results],\n      fetching: false\n    });\n  },[offers, total]);\n\n  return (\n    <Container className=\"d-flex flex-column overflow-auto\">\n      <h3>Search for activities</h3>\n      <div className=\"mb-3\">\n        <DateInput\n          value={dates}\n          onChange={handleDateChange}/>\n      </div>\n      <Container fluid style={{overflowY: 'auto'}}>\n        <InfiniteScroll\n          pageStart={0}\n          element={'div'}\n          initialLoad={true}\n          className={'row'}\n          hasMore={!fetching && (total > offers.length || page === 0)}\n          loadMore={loadMore}\n          loader={null}\n          threshold={30}\n          useWindow={false}>\n          {offers.map(offer => {\n            return (\n              <Col key={offer.id} sm={4}>\n                <OfferCard offer={offer}/>\n              </Col>\n            )\n          })}\n          {fetching && <div>Chargement...</div>}\n        </InfiniteScroll>\n      </Container>\n    </Container>\n  )\n}\n\nexport default OffersBrowse;\n","import {useCallback, useState} from \"react\";\n\nexport function useISOState(defaultValue){\n  const [value, setValue] = useState(defaultValue);\n\n  const setState = useCallback((newValue) => {\n    setValue(prevValue => ({\n      ...prevValue,\n      ...newValue\n    }))\n  }, [setValue]);\n\n  return [value, setState];\n}\n","import React from \"react\";\nimport {OffersBrowse} from \"./components/OffersBrowse\";\n\nfunction App() {\n  return (\n    <div className=\"App d-flex flex-column pt-2 pb-2\" style={{height: '100vh'}}>\n      <OffersBrowse/>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}